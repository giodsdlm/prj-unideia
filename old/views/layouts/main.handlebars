<!DOCTYPE html>
<html lang="pt-br">
<script>
  function openNav() {
    document.getElementById("mySidenav").style.width = "300px";
    document.getElementById("main").style.marginLeft = "300px";
    document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
  }
  function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.getElementById("main").style.marginLeft = "0";
    document.body.style.backgroundColor = "white";
  }
</script>

<head>
  <title>Portal Unideia</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">

  <script src="/bower_components/moment/moment.js"></script>
  <script src="/bower_components/moment/locale/pt-br.js"></script>

  <!-- Font Awesome JS -->
  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
    crossorigin="anonymous"></script>

   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
    crossorigin="anonymous">

</head>

<body>
  {{> _navbar}}

  <div class="container">
    {{> _msg}}
    {{> _errors}}
    {{{body}}}
  </div>

  <script type="text/javascript" src="js/mdb.min.js"></script>
  <!-- jQuery CDN - Slim version (=without AJAX) -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>

  <!-- AJAX -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>

  <!-- Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

  <!-- Regular CSS -->
  <link rel="stylesheet" href="/css/style.css">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css?family=Arvo:400,700" rel="stylesheet">

  <!-- in index.hbs -->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>



  <script>
    var updatePostStats = {
      Like: function (cardId) {
        document.querySelector('#likes-count-' + cardId).textContent++;
      },
      Unlike: function (cardId) {
        document.querySelector('#likes-count-' + cardId).textContent--;
      }
    };

    var toggleButtonText = {
      Like: function (button) {
        button.textContent = "Unlike";
      },
      Unlike: function (button) {
        button.textContent = "Like";
      }
    };

    var actOnPost = function (event) {
      var cardId = event.target.dataset.cardId;
      var action = event.target.textContent.trim();
      toggleButtonText[action](event.target);
      updateCardStats[action](cardId);
      axios.post('/ideas/' + cardId + '/act', { action: action });
    };
  </script>

  <script src="https://js.pusher.com/4.1/pusher.min.js"></script>

  <script>
    var pusher = new Pusher('your-app-id', {
      cluster: 'your-app-cluster'
    });
    var socketId;

    // retrieve the socket ID on successful connection
    pusher.connection.bind('connected', function () {
      socketId = pusher.connection.socket_id;
    });


    var channel = pusher.subscribe('post-events');
    channel.bind('postAction', function (data) {
      // log message data to console - for debugging purposes
      console.log(data);
      var action = data.action;
      updateCardStats[action](data.cardId);
    });
  </script>
</body>

</html>